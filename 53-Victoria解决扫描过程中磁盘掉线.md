## Victoria解决扫描过程中磁盘掉线

在使用 **Victoria** 扫描 USB 接口的磁盘时，频繁导致“磁盘掉线”（断开连接）是一个非常普遍的现象。这通常不是 Victoria 软件本身的问题，而是由 **USB 接口的特性**、**电源管理** 以及 **磁盘本身的物理状态** 共同导致的。

### 1. 供电不足 (最常见原因)

USB 接口的供电能力有限。当 Victoria 进行深度扫描（尤其是全盘扫描或尝试修复坏道）时，硬盘电机会全速运转，磁头频繁寻道，瞬间功耗会大幅增加。

- **现象：** 扫描到某个特定区域或坏道时，硬盘发出“咔哒”声，随后系统提示设备已断开。
- **对策：**
  - **插在后置接口：** 如果是台式机，**千万不要插在机箱前面的 USB 口**，直接插在主板后置的蓝色（USB 3.0/3.1）接口上。
  - **使用带电源的集线器：** 使用自带独立供电适配器的 USB Hub。
  - **双头 USB 线：** 使用那种一头接硬盘、两头接电脑的加强供电线。

### 2. Windows USB 电源管理拦截

Windows 默认开启了“USB 选择性暂停”，当它认为某个 USB 设备响应异常（扫描坏道时响应变慢）时，为了节能或保护系统，会自动切断电源。

- **对策：**
  - 打开 **设备管理器** -> 找到 **通用串行总线控制器**。
  - 右键点击每一个 **USB Root Hub**，选择 **属性** -> **电源管理**。
  - **取消勾选** “允许计算机关闭此设备以节约电源”。
  
- **注意：**有些电脑有两个 `USB Root Hub`，可能是主板（或处理器）集成了两套不同的 USB 控制器。  
  **分工明确：** 现代电脑通常将 USB 2.0（低速设备，如鼠标键盘）和 USB 3.0/3.1（高速设备，如移动硬盘）由不同的集线器管理。  
  **物理分布：** 即使你的电脑只有一个 Type-C 接口，由于主板芯片组的内部设计，它往往也会虚拟出两个根集线器来分别处理不同的传输协议。  
  **具体设置：** 既然你不知道你的磁盘当前挂载在哪个 Hub 下，**全部关掉电源管理是最保险的做法。**
  
- **Generic USB Hub**  
  我的一台电脑不经有 2 套 **USB Root Hub**，还有 3 套 **Generic USB Hub**，应该是很少出现这种情况。   
  按照 **USB Root Hub** 的方法，进行同样设置。

### 3. 坏道触发了固件保护

这是最棘手的情况。如果磁盘某处有严重的 **物理损坏（坏道）**，Victoria 扫描到该处时，硬盘固件（Firmware）会尝试反复读取。

- **现象：** 读写卡死太久，USB 控制器会认为设备已“失去响应”并强制复位重连。
- **对策：**
  - 在 Victoria 的 **Settings** 中，尝试调大 **Timeout (超时时间)**。
  - 如果掉线发生在固定位置，说明该处有严重物理损伤。建议先做“镜像备份”，不要再强行扫描。

### 4. USB 3.0 驱动与兼容性问题

有些 USB 3.0 扩展芯片（如某些廉价的扩展坞）在处理持续的高带宽、高频指令流时稳定性极差。

- **对策：** * 尝试把 U 盘/硬盘插在 **USB 2.0 (黑色)** 接口上扫描。虽然速度慢点，但信号更稳定，不容易掉线。
  - 更换一根高质量的屏蔽数据线。

### 5. 控制面板设置（针对系统策略）

仅仅改设备管理器有时是不够的，Windows 的电源计划还会从系统层面“强行”暂停 USB。

1. 按 `Win + S` 搜索 **“编辑电源计划”**。
2. 点击 **“更改高级电源设置”**。
3. 找到 **“USB 设置”** -> **“USB 选择性暂停设置”**。
4. 将“使用电池”和“接通电源”都设为 **“已禁用”**。

### 为什么 Victoria 扫描特别容易触发这个？

当 Victoria 扫描到磁盘的**慢道（扇区响应时间长）\**或\**坏道**时：

1. 磁盘会反复尝试读取该区域，导致数据传输暂时中断。
2. Windows 监测到 USB 接口长时间没有有效数据交换。
3. **误判：** 系统认为该设备已进入闲置状态，于是按照“电源管理”策略直接切断了供电。
4. **后果：** 你的磁盘物理断开了，Victoria 报出 `Disk Error` 或直接找不到驱动器。

### 额外的小建议

如果设置完还是掉线，请检查以下两点：

- **数据线质量：** Victoria 扫描对数据传输的稳定性要求极高，如果你用的是那种很细的廉价 USB 线，在高负载下阻抗变大也会导致电压不稳。
- **接口选择：** 如果你在用 ROG Ally，尽量不要接在普通的 Type-C 扩展坞上扫描，而是使用**原装充电头供电+直连**（如果接口允许）的方式。